<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/updatestyle.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"> <!-- Thêm Bootstrap CSS -->
  <%- include('../layout/header') %>
  <%- include('../layout/navbar') %>
</head>
<body>
  <main class="container my-5">
  <h2 class="text-center">Quản lý Người dùng</h2>
  <!-- <% if (success) { %>
    <div class="alert alert-success"><%= success %></div>
  <% } %>
  
  <% if (error) { %>
    <div class="alert alert-danger"><%= error %></div>
  <% } %> -->
  <!-- Tìm kiếm người dùng -->
  <div class="mb-4">
    <form action="/admin/users" method="get">
      <div class="input-group">
        <input
          type="text"
          class="form-control"
          placeholder="Tìm kiếm người dùng"
          name="search"
          value="<%= searchTerm %>"
        >
        <button class="btn btn-outline-secondary" type="submit">Tìm kiếm</button>
      </div>
    </form>
  </div>

  <!-- Danh sách người dùng -->
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>#</th>
        <th>Tên</th>
        <th>Email</th>
        <th>Số điện thoại</th>
        <th>Địa chỉ</th>
        <th>Vai trò</th>
        <th>Hành động</th>
      </tr>
    </thead>
    <tbody>
      <% users.forEach(function(user, index) { %>
        <tr>
          <td><%= index + 1 %></td>
          <td><%= user.name %></td>
          <td><%= user.email %></td>
          <td><%= user.phone || 'Không có' %></td>
          <td><%= user.address || 'Không có' %></td>
          <td><%= user.role === 'admin' ? 'Quản trị viên' : 'Người dùng' %></td>
          <td class="action-buttons">
            <a href="/admin/users/update/<%= user._id %>" class="btn btn-warning btn-sm">Sửa</a>
            <form
                action="/admin/users/delete/<%= user._id %>"
                method="post"
                class="d-inline"
                onsubmit="return confirm('Bạn có chắc chắn muốn xóa người dùng này?');"
            >
                <button type="submit" class="btn btn-danger btn-sm">Xóa</button>
            </form>
          </td>
        </tr>
      <% }); %>
    </tbody>
  </table>


  <div class="text-center mt-4 button-group">
    <a href="/admin/users/add" class="btn btn-primary">Thêm người dùng mới</a>
  </div>
  </main>
   <!-- Thêm Bootstrap JS và jQuery -->
   <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
   <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
   <script src="https://stackpath.bootstrapcdn.com/bootstrap /4.5.2/js/bootstrap.min.js"></script>
   <script src="/js/main.js"></script> <!-- Thêm tệp main.js -->
</body>
<%- include('../layout/footer') %>
</html>